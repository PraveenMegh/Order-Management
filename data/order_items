CREATE TABLE IF NOT EXISTS order_items (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER NOT NULL,          -- FK to orders.id
    product_name TEXT NOT NULL,
    ordered_qty INTEGER NOT NULL,
    dispatched_qty INTEGER DEFAULT 0,   -- default 0, better than NULL for calculation ease
    unit TEXT DEFAULT 'Nos',            -- setting a sensible default (optional)
    price REAL DEFAULT 0,               -- default 0 to avoid NULL in calculations
    unit_type TEXT DEFAULT 'Per Nos',   -- default for consistency
    status TEXT DEFAULT 'Pending',      -- Pending or Dispatched
    dispatched_at TEXT,                 -- ISO format timestamp preferred
    dispatched_by TEXT,
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE
);
